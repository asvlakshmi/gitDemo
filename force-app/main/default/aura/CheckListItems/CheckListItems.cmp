<aura:component controller= "checkUserCheckList" implements="force:appHostable,flexipage:availableForAllPageTypes,forceCommunity:availableForAllPageTypes" access="global" >
	<!-- attributes -->
    <aura:attribute name="data" type="Object"/>
    <aura:attribute name="headerName" type="String"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="errors" type="Object" default="[]"/>
    <aura:attribute name="draftValues" type="Object" default="[]"/>
    <aura:attribute name="checkListId" type="String" default=""/>
    <aura:attribute name="checkListItemId" type="String" default=""/>
	<aura:attribute name="showSpinner" type="Boolean" default="true" />
    
 	<aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner />
    </aura:if>
	<!-- handlers-->
	<aura:handler name="init" value="{! this }" action="{! c.init }"/>
     <lightning:card class="slds-p-left_x-large slds-box">
                    <aura:set attribute="actions">
                        <lightning:button label="New Item" onclick="{! c.newItem }"/>
                    </aura:set>
                    <aura:set attribute="title">
                        <lightning:icon iconName="action:check" size="x-small"/>
                        {!v.headerName} Items
                    </aura:set>
                     <lightning:datatable
            columns="{! v.columns }"
            data="{! v.data }"
            keyField="id"
            errors="{! v.errors }"
            draftValues="{! v.draftValues }"
            onsave="{! c.handleSaveEdition }" 
            onrowaction="{!c.handleRowAction}"
            hideCheckboxColumn="true" resizeColumnDisabled="true" aura:id="checkListItemTable" class="slds-table slds-cell-buffer_left fixedTableWidth"
        />
    </lightning:card>
            
    
    
    <div role="dialog" tabindex="-1" aura:id="editDialog" class="slds-modal" data-action-type="" data-modal="editDialog">
        <div class="slds-modal__container">
            <div class="slds-modal__header">
                <h2 id="header" class="slds-text-heading--medium">Add/Edit Item</h2>
            </div>
            <div class="slds-modal__content slds-p-around--medium" aura:id="recordFieldContainer">                                  
                <lightning:recordEditForm
                    onload="{!c.handleLoad}"
                    onsubmit="{!c.handleSubmit}"
                    onsuccess="{!c.handleSuccess}"
                    recordId="{!v.checkListItemId}"
                    objectApiName="Checklist_Item__c">
                    <!-- the messages component is for error messages -->
                    <lightning:messages />
        			<div class="slds-p-left_x-large">
                    <aura:if isTrue="{!v.checkListItemId==''}">
						<lightning:inputField fieldName="Name" />
					<aura:set attribute="else">
						<lightning:outputField fieldName="Name" />
					</aura:set>
                    </aura:if>
					
					<aura:if isTrue="{!v.checkListItemId==''}">
						<lightning:inputField fieldName="Description__c" />
					<aura:set attribute="else">
						<lightning:outputField fieldName="Description__c" />
					</aura:set>
                    </aura:if>
					
                    <lightning:inputField fieldName="Status__c" />
					<lightning:inputField fieldName="Checklist__c" aura:id="checkList" style="display:none;"/>
                    <div class="slds-m-top_medium slds-align_absolute-center">
                        <lightning:button variant="brand" type="submit" name="save" label="Save" />
                        <lightning:button label="Cancel" name="editDialog" onclick="{!c.closeEditModal}" />
						
					</div>
                    </div>
                </lightning:recordEditForm>
               
                
            </div>
            
        </div>
    </div>       
    <div class="slds-backdrop " aura:id="dialogBack"></div> 
</aura:component>